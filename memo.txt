C:\ca_java_2011\Spring\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\TeamProject\resources

초원수정

drop sequence mseq;
create sequence mseq
increment by 1
start with 1
minvalue 1
maxvalue 10000
nocache;


drop table members cascade constraints;
create table members(
	num number primary key,
	id varchar2(20),
	password varchar2(20),
	repassword varchar2(20),
	name varchar2(20),
	year varchar2(20),
	month varchar2(20),
	day varchar2(20),
	email varchar2(20),
	hp1 number,
	hp2 number,
	hp3 number,
	add1 varchar2(20),
	add2 varchar2(20),
	style varchar2(20),
	cat varchar2(20),
	age number,
	gender varchar2(20)
);

insert into members(num, id, password, name, email)
values(0, 'penguin', '1234', '펭귄', 'penguin@123');

insert into members(num, id, password, name, email, style, cat, age, gender)
values(mseq.nextval, 'coco', '1234', '코코', 'coco@123', 'happy', 'furniture', 1, 'female');

insert into members(num, id, password, name, email, style, cat, age, gender)
values(mseq.nextval, 'jelly', '1234', '젤리', 'jelly@123', 'cheerful', 'furniture', 2, 'female');

insert into members(num, id, password, name, email, style, cat, age, gender)
values(mseq.nextval, 'holy', '1234', '홀리', 'holy@123', 'modern', 'furniture', 3, 'female');


col num for 9;
col id for a8;
col password for a10;
col name for a10;
col email for a11;
col style for a10;
col cat for a10;
col age for 9;
col gender for a6;


select num, id, password, name, email, style, cat, age, gender from members;

commit;

-- cate : 카테고리 테이블
drop table cate;
create table cate(
	num number primary key,
	kind varchar2(20) not null,
	code varchar2(20) not null
);

drop sequence cate_seq ;
create sequence cate_seq
increment by 1
start with 1
minvalue 1
maxvalue 10000
nocache;

insert into cate 
values(cate_seq.nextval,'뷰티','B01');
insert into cate 
values(cate_seq.nextval,'여행','T01');
insert into cate 
values(cate_seq.nextval,'가구','F01');
insert into cate 
values(cate_seq.nextval,'가전','E01');

-- exhibition : 전시/박람 테이블
drop table exhibition;
create table exhibition(
	num number not null primary key,
	category varchar2(20) not null,
	name varchar2(50) not null,
	start_period date not null,
	end_period date not null,
	start_time varchar2(10) not null,
	end_time varchar2(10) not null,
	place varchar2(20) not null,
	company varchar2(30) not null,
	price number not null,
	area_tel varchar2(10),
	tel1 varchar2(10),
	tel2 varchar2(10),
	img varchar2(20),
	style varchar2(50),
	contents varchar2(300) not null
);

drop sequence ex_seq ;
create sequence ex_seq
increment by 1
start with 1
minvalue 1
maxvalue 10000
nocache;


-- order : 주문 테이블
drop sequence seqorder;
create sequence seqorder start with 1 increment by 1 nocache ;

DROP TABLE orders CASCADE CONSTRAINTS;

create table orders(
  onum number primary key,
  mid varchar2(20) references members(id) on delete set null,
  odate date default sysdate 
);

-- orderdetail : 주문 상세 테이블
drop sequence seqodetail;
create sequence seqodetail start with 1 increment by 1 nocache ;

drop table orderdetail purge;

create table orderdetail(
  odnum number primary key,
  onum number references orders(onum) on delete cascade,
  pnum number references exhibition(num) on delete set null,
  oday varchar2(20),
  otime varchar2(20),
  oqty number
);

commit;

--공지사항 테이블
drop table notice;
create table notice(
  no number primary key,
  title varchar2(100) not null,
  content clob,
  regdate date default sysdate,
  viewcnt number default 0,
  imp number not null
  );
  
drop sequence notice_seq;
create sequence notice_seq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;
  
--qna 테이블
drop table qna;
create table qna(
  no number primary key,
  category varchar2(30) not null,
  question varchar2(100) not null,
  answer varchar2(300) not null,
  regdate date default sysdate
  );
  
drop sequence qna_seq;
create sequence qna_seq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;